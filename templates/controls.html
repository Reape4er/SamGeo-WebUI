<div class="style-controls">
    <h3>Управление стилями слоев</h3>
    <label for="layer-select">Выберите слой:</label>
    <select id="layer-select">
        <!-- Опции будут добавлены через JavaScript -->
    </select>
    <br>
    <label for="color">Цвет:</label>
    <input type="color" id="color" value="#ff0000">
    <br>
    <label for="weight">Толщина:</label>
    <input type="number" id="weight" value="2" min="1">
    <br>
    <label for="opacity">Прозрачность:</label>
    <input type="number" id="opacity" value="0.3" min="0" max="1" step="0.1">
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const layerSelect = document.getElementById('layer-select');
        const colorInput = document.getElementById('color');
        const weightInput = document.getElementById('weight');
        const opacityInput = document.getElementById('opacity');

        // Функция для обновления стиля слоя
        function updateLayerStyle() {
            const selectedLayerKey = layerSelect.value;
            const selectedLayer = window.layers[selectedLayerKey];

            if (selectedLayer) {
                const newStyle = {
                    color: colorInput.value,
                    weight: parseInt(weightInput.value),
                    fillOpacity: parseFloat(opacityInput.value),
                };

                
                selectedLayer.setStyle(newStyle);

                selectedLayer.options.style = newStyle;
            }
        }

        // Обработчики изменений параметров стиля
        colorInput.addEventListener('input', updateLayerStyle);
        weightInput.addEventListener('input', updateLayerStyle);
        opacityInput.addEventListener('input', updateLayerStyle);

        // Обработчик изменения выбранного слоя
        layerSelect.addEventListener('change', function() {
            const selectedLayerKey = this.value;
            const selectedLayer = window.layers[selectedLayerKey];

            if (selectedLayer) {
                const { color, weight, fillOpacity } = selectedLayer.options.style;

                colorInput.value = color;
                weightInput.value = weight;
                opacityInput.value = fillOpacity;
            }
        });
    });
</script>


<style>
    .style-controls {
        position: absolute;
        top: 460px;
        left: 20px;
        background-color: rgba(255, 255, 255, 0.8);
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        z-index: 1000;
    }

    .style-controls label {
        display: block;
        margin-top: 10px;
    }

    .style-controls input[type="color"],
    .style-controls input[type="number"] {
        width: 100%;
    }
</style>